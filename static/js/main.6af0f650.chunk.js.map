{"version":3,"sources":["images/header-logo.svg","components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/ImagePopup.js","utils/utils.js","components/PopupWithForm.js","components/PopupButton.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/DeleteCardPopup.js","utils/api.js","components/AddPlacePopup.js","components/App.js","index.js"],"names":["Header","className","src","headerLogo","alt","Footer","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onDeleteButtonClick","currentUserData","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","cardDeleteButtonClassName","link","name","onClick","length","Main","cards","onEditProfile","onAddPlace","onEditAvatar","isLoading","style","backgroundColor","backgroundImage","avatar","about","type","color","height","width","margin","map","ImagePopup","onClose","onOverlayClick","popupOpened","handleKeyDown","event","keyCode","useEffect","document","addEventListener","removeEventListener","PopupWithForm","title","formName","isOpen","onSubmit","children","id","method","action","noValidate","PopupButton","text","isActive","disabled","EditProfilePopup","onUpdateUser","values","errors","setValues","setErrors","handleChange","useState","setIsActive","editProfile","user","job","formValues","Array","from","Object","every","elem","e","preventDefault","value","placeholder","minLength","maxLength","onChange","required","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","editAvatar","current","undefined","ref","DeleteCardPopup","onCardDelete","api","baseUrl","headers","this","_baseURL","_headers","res","ok","json","Promise","reject","status","fetch","then","_checkResStatus","all","getInitialCards","getUserInfo","updatedData","body","JSON","stringify","cardId","cardData","authorization","AddPlacePopup","addCard","placeName","placeUrl","App","currentUser","setCurrentUser","isEditProfilePopupOpen","setEditProfilePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isDeleteCardPopupOpen","setDeleteCardPopupOpen","selectedCard","setSelectedCard","setCard","setCards","setIsLoading","target","form","validationMessage","closeAllPopups","closeClickOverlayPopups","currentTarget","initialCardsList","catch","err","console","log","userProfileData","Provider","changeLikeCardStatus","newCard","newCards","c","deleteCard","filter","patchUpdatedUserInfo","updatedUserData","patchUserAvatar","updatedUserAvatar","postNewCard","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6af0f650.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/header-logo.a307e1c4.svg\";","import React from 'react';\nimport headerLogo from '../images/header-logo.svg';\n\nfunction Header(){\n  return (\n    <header className=\"header page__header\">\n      <img className=\"header__logo\" src={headerLogo} alt=\"Логотип Mesto\" />\n    </header>\n  )\n}\n\nexport default Header;\n","import React from 'react';\n\nfunction Footer(){\n  return(\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\n\n//Create a Context object\nexport const CurrentUserContext = React.createContext();\n\n","import React from 'react';\n\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card({card, onCardClick, onCardLike, onDeleteButtonClick}){\n\n  // Assign CurrentUserContext\n  const currentUserData = React.useContext(CurrentUserContext);\n\n  // compare card id and card owner id\n  const isOwn = (card.owner._id === currentUserData._id);\n  // check if card has already have a like\n  const isLiked = card.likes.some(i => i._id === currentUserData._id);\n\n  // variables for styling elements\n  const cardLikeButtonClassName = (\n    `mesto-card__like-icon ${isLiked ? 'mesto-card__like-icon_active' : ''}`\n  );\n  const cardDeleteButtonClassName = (\n    `mesto-card__trash ${isOwn ? '' : 'mesto-card__trash_hidden'}`\n  );\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleLike() {\n    onCardLike(card);\n  }\n\n  function clickI(){\n    onDeleteButtonClick(card);\n  }\n\n  return (\n    <li className=\"mesto-card\">\n      <img className=\"mesto-card__image\" src={card.link} alt={card.name} onClick={handleClick}/>\n      <button className={cardDeleteButtonClassName} onClick={clickI}/>\n      <div className=\"mesto-card__info\">\n        <h2 className=\"mesto-card__title\">{card.name}</h2>\n        <div className=\"mesto-card__like-group\">\n          <button className={cardLikeButtonClassName} onClick={handleLike} />\n          <p className=\"mesto-card__like-number\">{card.likes.length}</p>\n        </div>\n      </div>\n    </li>\n  )\n}\n\nexport default Card;\n","import React from 'react';\nimport Card from './Card';\nimport Loader from 'react-loader-spinner';\n\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nfunction Main({\n    cards,\n    onEditProfile,\n    onAddPlace,\n    onEditAvatar,\n    onCardClick,\n    onCardLike,\n    onDeleteButtonClick,\n    isLoading })\n  {\n    //create variable for contain CurrentUser\n    const currentUserData = React.useContext(CurrentUserContext);\n\n    return(\n      <main className=\"main page__main\">\n        <section className=\"profile\">\n          <div className=\"profile__avatar\" onClick={onEditAvatar} style={isLoading?{backgroundColor: `#cccccc`}:{ backgroundImage: `url(${currentUserData.avatar})` }} ></div>\n          <div className=\"profile__info\">\n            <h1  className=\"profile__title\">{isLoading? 'User' : currentUserData.name}</h1>\n            <button className=\"profile__edit-button\" onClick={onEditProfile} />\n            <p className=\"profile__subtitle\">{isLoading? 'Description':  currentUserData.about}</p>\n          </div>\n          <button className=\"profile__add-button\" onClick={onAddPlace} />\n        </section>\n        <section className=\"mesto-collection main__mesto-collection\">\n          <ul className=\"mesto-cards\">\n            { isLoading\n              ? <Loader type=\"ThreeDots\" color=\"#ffffff\" height={60} width={60} style={{ margin: 'auto'}} />\n              : cards.map((card)=>\n              <Card\n                key={card._id}\n                card={card}\n                onCardClick={onCardClick}\n                onCardLike={onCardLike}\n                onDeleteButtonClick={onDeleteButtonClick}\n              />)\n            }\n          </ul>\n        </section>\n      </main>\n    );\n}\n\nexport default Main;\n","import React from 'react';\nimport escapeKeyCode from '../utils/utils';\n\nfunction ImagePopup({card, onClose, onOverlayClick}){\n\n  const popupOpened = card ? 'popup_opened' : ''\n\n  function handleKeyDown(event){\n    if(card && event.keyCode === escapeKeyCode){\n      onClose();\n    }\n  };\n\n  React.useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  });\n\n  return(\n    <div className={`popup popup_image-viewer ${popupOpened}`} onClick={onOverlayClick}>\n      <div className=\"popup__container popup__container_type_image\">\n        <figure className=\"popup__figure\">\n          <img className=\"popup__image\" src={card.link} alt={card.name} />\n          <figcaption className=\"popup__caption\">{card.name}</figcaption>\n        </figure>\n        <button className=\"popup__close-button\" onClick={onClose} />\n      </div>\n    </div>\n  )\n}\n\nexport default ImagePopup;\n","const escapeKeyCode = 27;\nexport default escapeKeyCode;\n","import React from 'react';\n\nfunction PopupWithForm({\n    title,\n    formName,\n    isOpen,\n    onClose,\n    onOverlayClick,\n    onSubmit,\n    children })\n  {\n\n  const popupOpened = isOpen ? 'popup_opened' : '';\n\n  return(\n    <div\n      className={`popup popup_type_${formName} ${popupOpened}`}\n      id={formName}\n      onClick={onOverlayClick}\n    >\n      <div className=\"popup__container\">\n        <div className=\"popup__header\">\n          <h2 className=\"popup__title\">{title}</h2>\n          <button className=\"popup__close-button\" onClick={onClose}></button>\n        </div>\n        <form\n          className=\"popup__form\"\n          id={formName}\n          name={formName}\n          onSubmit={onSubmit}\n          method=\"POST\"\n          action=\"#\"\n          noValidate\n        >\n          {children}\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default PopupWithForm;\n","import React from 'react';\n\nfunction PopupButton({className, text, type, isActive, isLoading}){\n  return(\n    <button\n      className={isActive || isLoading ? className : `${className} ${className}_disabled` }\n      type={type}\n      disabled={isActive? false : true}\n    >{text}</button>\n  )\n}\n\nexport default PopupButton;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport PopupButton from './PopupButton';\nimport escapeKeyCode from '../utils/utils';\n\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup({\n    isOpen,\n    onClose,\n    onUpdateUser,\n    onOverlayClick,\n    values,\n    errors,\n    setValues,\n    setErrors,\n    handleChange,\n    isLoading })\n  {\n\n    // assign CurrentUserContext\n    const currentUserData = React.useContext(CurrentUserContext);\n    //state for validation form\n    const [isActive, setIsActive]=React.useState(false);\n    // inputs count in this popup\n    const inputListLength = 2;\n\n    React.useEffect(() => {\n\n      setValues({ ...values,  editProfile: { ...values.editProfile,\n        user: currentUserData.name,\n        job:currentUserData.about\n      }});\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [currentUserData]);\n\n    React.useEffect(() => {\n\n      const formValues =  Array.from(Object.values(values.editProfile));\n      const formErrors = Array.from(Object.values(errors.editProfile));\n\n      //set isActive state true for all filled inputs without errors\n       if(formErrors.every(elem => elem === \"\") && formValues.length === inputListLength) {\n         setIsActive(true);\n       } else {\n         setIsActive(false);\n       }\n    }, [errors, values]);\n\n    function handleSubmitForm(e) {\n\n      e.preventDefault();\n\n      onUpdateUser({\n        name: values.editProfile.user,\n        about: values.editProfile.job,\n      });\n\n      setValues({ ...values,  editProfile: {}});\n      setErrors({...errors, editProfile:{}});\n    }\n\n    function handleClose(){\n      onClose()\n      setValues({ ...values,  editProfile: { ...values.editProfile,\n        user: currentUserData.name,\n        job:currentUserData.about\n      }});\n      setErrors({...errors, editProfile:{}});\n    }\n\n    function handleKeyDown(event){\n      if(isOpen && event.keyCode ===escapeKeyCode){\n        onClose();\n      }\n    };\n\n    React.useEffect(() => {\n      document.addEventListener('keydown', handleKeyDown);\n\n      return () => {\n        document.removeEventListener('keydown', handleKeyDown);\n      };\n    });\n\n    return (\n      <PopupWithForm\n        title=\"Редактировать профиль\"\n        formName=\"editProfile\"\n        isOpen={isOpen}\n        onClose={handleClose}\n        onOverlayClick={onOverlayClick}\n        onSubmit={handleSubmitForm}\n      >\n        <>\n          <div className=\"popup__field\">\n            <input\n              className={(isActive || values.editProfile.user !== 0)? \"popup__input\" : \"popup__input popup__input_type_error\"}\n              name=\"user\"\n              value={values.editProfile.user || ''}\n              placeholder=\"Введите имя\"\n              type=\"text\"\n              minLength=\"2\"\n              maxLength=\"40\"\n              onChange={handleChange}\n              required\n            />\n            {errors.editProfile.user && (\n              <span className=\"popup__input-error popup__input-error_active\">{errors.editProfile.user}</span>\n            )}\n          </div>\n          <div className=\"popup__field\">\n            <input\n              className={(isActive || values.editProfile.job !== 0 )? \"popup__input\" : \"popup__input popup__input_type_error\"}\n              name=\"job\"\n              value={values.editProfile.job|| ''}\n              placeholder=\"Введите род занятий\"\n              type=\"text\"\n              minLength=\"2\"\n              maxLength=\"200\"\n              onChange={handleChange}\n              required\n            />\n            {errors.editProfile.job && (\n              <span className=\"popup__input-error popup__input-error_active\">{errors.editProfile.job}</span>\n            )}\n          </div>\n          <PopupButton\n            className=\"popup__submit-button\"\n            text={isLoading? \"Сохранение...\" : \"Сохранить\"}\n            type=\"submit\"\n            isActive={isActive}\n            isLoading={isLoading}\n          />\n        </>\n      </PopupWithForm>\n    )\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\n\nimport PopupWithForm from './PopupWithForm';\nimport PopupButton from './PopupButton';\nimport escapeKeyCode from '../utils/utils';\n\nfunction EditAvatarPopup({\n    isOpen,\n    onClose,\n    onUpdateAvatar,\n    onOverlayClick,\n    values,\n    errors,\n    setValues,\n    setErrors,\n    handleChange,\n    isLoading })\n  {\n\n    const avatarRef = React.useRef(null);\n\n    //state for validation form\n    const [isActive, setIsActive]=React.useState(false);\n\n    // inputs count in this popup\n    const inputListLength = 1;\n\n    React.useEffect(() => {\n\n      const formValues =  Array.from(Object.values(values.editAvatar));\n      const formErrors = Array.from(Object.values(errors.editAvatar));\n      //set isActive state true for all filled inputs without errors\n      if(formErrors.every(elem => elem === \"\") && formValues.length === inputListLength) {\n        setIsActive(true);\n       } else {\n        setIsActive(false);\n      }\n\n    }, [errors, values]);\n\n\n    const handleSubmit = (e) => {\n\n      e.preventDefault();\n\n      onUpdateAvatar({\n        avatar: avatarRef.current.value\n      });\n\n      setValues({ ...values,  editAvatar: {}});\n      setErrors({...errors, editAvatar:{}});\n    }\n\n    function handleClose(){\n      onClose();\n      setValues({ ...values,  editAvatar: {}});\n      setErrors({...errors, editAvatar:{}});\n    }\n\n    function handleKeyDown(event){\n      if(isOpen && event.keyCode ===escapeKeyCode){\n        onClose();\n      }\n    };\n\n    React.useEffect(() => {\n      document.addEventListener('keydown', handleKeyDown);\n\n      return () => {\n        document.removeEventListener('keydown', handleKeyDown);\n      };\n    });\n\n\n    return(\n      <PopupWithForm\n        title=\"Обновить аватар\"\n        formName=\"editAvatar\"\n        isOpen={isOpen}\n        onClose={handleClose}\n        onSubmit={handleSubmit}\n        onOverlayClick={onOverlayClick}\n      >\n        <>\n          <div className=\"popup__field\">\n            <input\n              className={(isActive || values.editAvatar.avatar === ''|| values.editAvatar.avatar === undefined)? \"popup__input\" : \"popup__input popup__input_type_error\"}\n              name=\"avatar\"\n              ref={avatarRef}\n              value={values.editAvatar.avatar || ''}\n              placeholder=\"Ссылка на картинку\"\n              type=\"url\"\n              onChange={handleChange}\n              required\n            />\n            {errors.editAvatar.avatar && (\n              <span className=\"popup__input-error popup__input-error_active\">{errors.editAvatar.avatar}</span>\n            )}\n          </div>\n          <PopupButton\n            className=\"popup__submit-button\"\n            text={isLoading? \"Сохранение...\" : \"Сохранить\"}\n            type=\"submit\"\n            isActive={isActive}\n            isLoading={isLoading}\n          />\n        </>\n      </PopupWithForm>\n    )\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport escapeKeyCode from '../utils/utils';\n\nfunction DeleteCardPopup({\n    isOpen,\n    onClose,\n    onOverlayClick,\n    onCardDelete,\n    isLoading,\n    card\n  })\n  {\n\n    const popupOpened = isOpen ? 'popup_opened' : '';\n\n    function handleCardDelete() {\n      onCardDelete(card);\n    }\n\n    function handleKeyDown(event){\n      if(isOpen && event.keyCode === escapeKeyCode){\n        onClose();\n      }\n    };\n\n    React.useEffect(() => {\n      document.addEventListener('keydown', handleKeyDown);\n\n      return () => {\n        document.removeEventListener('keydown', handleKeyDown);\n      };\n    });\n\n    return(\n      <div className={`popup popup_submit-action ${popupOpened}`} onClick={onOverlayClick}>\n        <div className=\"popup__container popup__container_type_submit-action\">\n          <div className=\"popup__header\">\n            <h2 className=\"popup__title\">Вы уверены?</h2>\n            <button className=\"popup__close-button\"></button>\n          </div>\n          <button\n            className=\"popup__submit-button popup__submit-button_type_action\"\n            onClick={handleCardDelete}>\n             {isLoading? 'Удаляем...' : 'Да'} </button>\n        </div>\n      </div>\n    )\n}\n\nexport default DeleteCardPopup;\n","class Api {\n  constructor({baseUrl, headers}){\n    this._baseURL = baseUrl;\n    this._headers = headers\n  }\n\n  _checkResStatus(res){\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`)\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseURL}/cards`, {\n      headers: this._headers\n    })\n    .then(res => this._checkResStatus(res));\n  }\n\n  getUserInfo(){\n    return fetch(`${this._baseURL}/users/me`, {\n      headers: this._headers\n    })\n    .then(res => this._checkResStatus(res));\n  }\n\n  getAllInitialData(){\n    return Promise.all([this.getInitialCards(), this.getUserInfo()])\n  }\n\n  patchUserAvatar(updatedData){\n    return fetch(`${this._baseURL}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: updatedData.avatar\n      })\n    })\n    .then(res => this._checkResStatus(res));\n  }\n\n  patchUpdatedUserInfo(updatedData){\n    return fetch(`${this._baseURL}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: updatedData.name,\n        about: updatedData.about\n      })\n    })\n    .then(res => this._checkResStatus(res));\n  }\n\n  changeLikeCardStatus(cardId, isLiked){\n    if(isLiked){\n      return fetch(`${this._baseURL}/cards/likes/${cardId}`, {\n        method: 'DELETE',\n        headers: this._headers\n      })\n      .then(res => this._checkResStatus(res));\n    } else {\n      return fetch(`${this._baseURL}/cards/likes/${cardId}`, {\n        method: 'PUT',\n        headers: this._headers\n      })\n      .then(res => this._checkResStatus(res));\n    }\n  }\n\n  deleteCard(cardId){\n    return fetch(`${this._baseURL}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n    .then(res => this._checkResStatus(res));\n  }\n\n  postNewCard(cardData){\n    return fetch(`${this._baseURL}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: cardData.name,\n        link: cardData.link\n      })\n    })\n    .then(res => this._checkResStatus(res));\n  }\n}\n\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-16',\n  headers: {\n    authorization: 'fba2c732-c582-4b59-a665-759f5dbd039a',\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport PopupButton from './PopupButton';\nimport escapeKeyCode from '../utils/utils';\n\nfunction AddPlacePopup({\n    isOpen,\n    onClose,\n    onAddPlace,\n    onOverlayClick,\n    values,\n    errors,\n    setValues,\n    setErrors,\n    handleChange,\n    isLoading })\n  {\n\n    //state for validation form\n    const [isActive, setIsActive]= React.useState(false);\n\n    // inputs count in this popup\n    const inputListLength = 2;\n\n    React.useEffect(() => {\n\n      const formValues =  Array.from(Object.values(values.addCard));\n      const formErrors = Array.from(Object.values(errors.addCard));\n\n      //set isActive state true for all filled inputs without errors\n       if(formErrors.every(elem => elem === \"\") && formValues.length === inputListLength) {\n         setIsActive(true);\n       } else {\n         setIsActive(false);\n       }\n\n    }, [errors, values]);\n\n    function handleSubmit(e) {\n\n      e.preventDefault();\n\n      onAddPlace({\n        name: values.addCard.placeName,\n        link: values.addCard.placeUrl,\n      });\n\n      setValues({ ...values, addCard:{}});\n      setErrors({...errors, addCard:{}});\n    }\n\n    function handleClose(){\n      onClose();\n      setValues({ ...values,  addCard: {}});\n      setErrors({...errors, addCard:{}});\n    }\n\n    function handleKeyDown(event){\n      if(isOpen && event.keyCode === escapeKeyCode){\n        onClose();\n        setValues({ ...values,  addCard: {}});\n        setErrors({...errors, addCard:{}});\n      }\n    };\n\n    React.useEffect(() => {\n      document.addEventListener('keydown', handleKeyDown);\n\n      return () => {\n        document.removeEventListener('keydown', handleKeyDown);\n      };\n    });\n\n    return (\n      <PopupWithForm\n        title=\"Новое место\"\n        formName=\"addCard\"\n        isOpen={isOpen}\n        onClose={handleClose}\n        onSubmit={handleSubmit}\n        onOverlayClick={onOverlayClick}\n      >\n        <>\n          <div className=\"popup__field\">\n            <input\n              className={(isActive || values.addCard.placeName !== 0)? \"popup__input\" : \"popup__input popup__input_type_error\"}\n              name=\"placeName\"\n              value={values.addCard.placeName || ''}\n              placeholder=\"Название\"\n              type=\"text\"\n              minLength=\"1\"\n              maxLength=\"30\"\n              onChange={handleChange}\n              required\n            />\n            {errors.addCard.placeName && (\n              <span className=\"popup__input-error popup__input-error_active\">{errors.addCard.placeName}</span>\n            )}\n          </div>\n          <div className=\"popup__field\">\n            <input\n              className={(isActive || values.addCard.placeUrl !== 0)? \"popup__input\" : \"popup__input popup__input_type_error\"}\n              name=\"placeUrl\"\n              value={values.addCard.placeUrl || ''}\n              placeholder=\"Ссылка на картинку\"\n              type=\"url\"\n              onChange={handleChange}\n              required\n            />\n            {errors.addCard.placeUrl && (\n              <span className=\"popup__input-error popup__input-error_active\">{errors.addCard.placeUrl}</span>\n            )}\n          </div>\n          <PopupButton\n            className=\"popup__submit-button\"\n            text={isLoading? \"Сохранение...\" : \"Создать\"}\n            type=\"submit\"\n            isActive={isActive}\n            isLoading={isLoading}\n          />\n        </>\n      </PopupWithForm>\n    )\n}\n\nexport default AddPlacePopup;\n","import React from 'react';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Main from './Main';\n\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport DeleteCardPopup from './DeleteCardPopup';\nimport api from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport AddPlacePopup from './AddPlacePopup';\n\nfunction App() {\n\n  // set useState for CurrentUserContext\n  const [currentUser, setCurrentUser] = React.useState('');\n\n  // useStates for manage popups opening\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setDeleteCardPopupOpen] = React.useState(false);\n\n  // states for updating  card by click card for delete and show in image viewer\n  const [selectedCard, setSelectedCard]= React.useState(false);\n  const [card, setCard] = React.useState({});\n\n  // states for updating card list\n  const [cards, setCards] = React.useState([]);\n\n  // states for updating and styling loading proccess\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  // states for collecting all forms values and validation errors\n  const [values, setValues] = React.useState({\n    addCard: {},\n    editProfile: {},\n    editAvatar: {}\n  });\n  const [errors, setErrors] = React.useState({\n    addCard: {},\n    editProfile: {},\n    editAvatar: {}\n  });\n\n  React.useEffect(() => {\n    // run Loader\n    setIsLoading(true);\n    //fetch profile and cards data\n    api.getInitialCards()\n      .then((initialCardsList) => {\n\n        setCards(initialCardsList.map((card)=>({\n          _id: card._id,\n          owner: card.owner,\n          name: card.name,\n          link: card.link,\n          likes: card.likes\n        })));\n        // stop Loader\n        setIsLoading(false);\n      })\n      .catch((err)=> console.log(err));\n  }, []);\n\n\n  React.useEffect(() => {\n    //fetch profile and cards data\n    api.getUserInfo()\n      .then((userProfileData) => {\n\n        //update data with server response\n        setCurrentUser(userProfileData);\n      })\n      .catch((err)=> console.log(err));\n  }, []);\n\n  function handleChange(event){\n    setValues({ ...values,  [event.target.form.id]: { ...values[event.target.form.id],\n      [event.target.name]: event.target.value,\n    }\n\n    });\n    setErrors({...errors, [event.target.form.id]:{\n      ...errors[event.target.form.id],\n      [event.target.name]: event.target.validationMessage}\n    });\n  };\n\n  function handleCardLike(card) {\n    // check if card has already have a like\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        //create new cardList replacing liked/disliked card\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards)\n      })\n      .catch((err)=> console.log(err));\n  }\n\n  function handleCardDelete(card){\n    setIsLoading(true);\n\n    api.deleteCard(card._id)\n      .then(()=>{\n        //create new cardList removing card with certain id\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n        setIsLoading(false);\n        closeAllPopups();\n      })\n      .catch((err)=> console.log(err));\n  }\n\n  function handleUpdateUser(e){\n    setIsLoading(true);\n\n    api.patchUpdatedUserInfo(e)\n      .then((updatedUserData)=> {\n        // update user info avatar with new data\n        setCurrentUser(updatedUserData);\n        setIsLoading(false);\n        closeAllPopups();\n      })\n      .catch((err)=> console.log(err));\n  }\n\n  function handleUpdateAvatar(e){\n    setIsLoading(true);\n    api.patchUserAvatar(e)\n      .then((updatedUserAvatar)=> {\n        // update user avatar with new data\n        setCurrentUser(updatedUserAvatar);\n        setIsLoading(false);\n        closeAllPopups();\n      })\n      .catch((err)=> console.log(err));\n  }\n\n  function handleAddPlaceSubmit(e){\n    setIsLoading(true);\n    api.postNewCard(e)\n      .then((newCard)=>{\n        // add new card to card list\n        setCards([newCard, ...cards]);\n        setIsLoading(false);\n        closeAllPopups();\n      })\n      .catch((err)=> console.log(err));\n  }\n\n  function handleCardClick(e){\n    setSelectedCard(e);\n  }\n\n  //open popups\n  function handleEditProfileClick(){\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleEditAvatarClick(){\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleAddPlaceClick(){\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleDeleteButtonClick(card){\n    setDeleteCardPopupOpen(true);\n    setCard(card);\n  }\n\n  //close popups\n  function closeAllPopups(){\n    setEditProfilePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setDeleteCardPopupOpen(false);\n    setSelectedCard(false);\n  }\n\n  // close popup by clicking on overlay\n  function closeClickOverlayPopups(e){\n    if(e.target === e.currentTarget){\n      closeAllPopups();\n    }\n  }\n\n  return (\n    //Add proveider to all components\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App page\">\n        <Header />\n        <Main\n          onEditProfile={handleEditProfileClick}\n          onEditAvatar={handleEditAvatarClick}\n          onAddPlace={handleAddPlaceClick}\n          onCardClick={handleCardClick}\n          cards={cards}\n          onCardLike={handleCardLike}\n          onDeleteButtonClick={handleDeleteButtonClick}\n          isLoading={isLoading}\n        />\n        <Footer />\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n          onOverlayClick={closeClickOverlayPopups}\n        />\n        <DeleteCardPopup\n          card={card}\n          isOpen={isDeleteCardPopupOpen}\n          onClose={closeAllPopups}\n          onOverlayClick={closeClickOverlayPopups}\n          onCardDelete={handleCardDelete}\n          isLoading={isLoading}\n        />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onOverlayClick={closeClickOverlayPopups}\n          onUpdateUser={handleUpdateUser}\n          values={values}\n          errors={errors}\n          setValues={setValues}\n          setErrors={setErrors}\n          handleChange={handleChange}\n          isLoading={isLoading}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onOverlayClick={closeClickOverlayPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          values={values}\n          errors={errors}\n          setValues={setValues}\n          setErrors={setErrors}\n          handleChange={handleChange}\n          isLoading={isLoading}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n          onOverlayClick={closeClickOverlayPopups}\n          values={values}\n          errors={errors}\n          setValues={setValues}\n          setErrors={setErrors}\n          handleChange={handleChange}\n          isLoading={isLoading}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}